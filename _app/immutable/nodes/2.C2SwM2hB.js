import{a as m,f as k,t as O}from"../chunks/CmABK3ch.js";import{o as Q}from"../chunks/C3KTsffu.js";import{G as Y,R,z as a,K as j,M as t,A as s,O as o,P as l,I as u,Q as q}from"../chunks/DX8fIFk5.js";import{e as E,s as F}from"../chunks/BCGGEuF3.js";import{i as T}from"../chunks/BoDYdXhk.js";import{r as S}from"../chunks/CEB31HlB.js";import{b as $}from"../chunks/P7S1Rgri.js";import{s as H,a as V}from"../chunks/B-iacpfs.js";import{g as X,b as Z}from"../chunks/DELZXoMM.js";import{J as ee}from"../chunks/BKciISmj.js";import{s as D}from"../chunks/CGFsDbUz.js";function ae(){if(typeof localStorage<"u"){const n=localStorage.getItem("deviceId");if(n)return n}const v="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var c=Math.random()*16|0,g=n=="x"?c:c&3|8;return g.toString(16)});return typeof localStorage<"u"&&localStorage.setItem("deviceId",v),v}var se=k('<div class="error-message fade-in svelte-1uha8ag"> </div>'),re=k('<span class="spinner svelte-1uha8ag"></span> Connecting...',1),te=k('<div class="page-container svelte-1uha8ag"><div class="login-card glass svelte-1uha8ag"><div class="logo svelte-1uha8ag"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-12 h-12 svelte-1uha8ag"><path d="M11.968 0C5.394 0 0 5.418 0 12c0 6.643 5.394 12 11.968 12 6.634 0 12.032-5.418 12.032-12 0-6.643-5.385-12-12.032-12zm6.205 17.584c-1.393.743-3.612 1.34-6.197 1.34-4.524 0-7.796-2.454-7.796-6.866 0-4.603 3.498-7.567 8.163-7.567 2.454 0 4.603.488 5.79.996l-.99 2.56c-1.077-.384-2.735-.743-4.543-.743-2.903 0-4.9.932-4.9 4.384 0 3.018 2.053 4.195 4.883 4.195 1.597 0 3.033-.306 4.093-.725l1.492 2.426z"></path></svg> <h1 class="svelte-1uha8ag">JellySlides</h1> <p class="svelte-1uha8ag">Your media, beautifully displayed.</p></div> <form class="login-form"><div class="form-group"><label for="url" class="form-label">Server Address</label> <input type="text" id="url" class="form-input" placeholder="e.g. 192.168.1.100:8096"/></div> <div class="form-group"><label for="username" class="form-label">Username</label> <input type="text" id="username" class="form-input" placeholder="Username"/></div> <div class="form-group"><label for="password" class="form-label">Password</label> <input type="password" id="password" class="form-input" placeholder="Password"/></div> <!> <button type="submit" class="btn btn-primary login-btn svelte-1uha8ag"><!></button></form></div></div>');function xe(v,n){Y(n,!0);const c=()=>V(D,"$serverConfig",g),[g,W]=H();let f=u(""),d=u(""),x=u(""),p=u(!1),i=u("");Q(()=>{c()&&(s(f,c().baseUrl,!0),s(d,c().username,!0))});async function B(){if(!a(f)||!a(d)){s(i,"Please fill in all fields");return}s(p,!0),s(i,"");try{let e=a(f).trim();e.startsWith("http")||(e="http://"+e),e.endsWith("/")&&(e=e.slice(0,-1));const r=ae(),U={baseUrl:e,username:a(d),userId:"",accessToken:"",deviceId:r},C=await new ee(U).authenticateUser(a(d),a(x));D.set({baseUrl:e,username:C.User.Name,userId:C.User.Id,accessToken:C.AccessToken,deviceId:r}),X(`${Z}/config`)}catch(e){console.error(e),s(i,"Connection failed. Please check your URL and credentials."),e.message&&s(i,a(i)+` (${e.message})`)}finally{s(p,!1)}}var h=te(),P=o(h),b=t(o(P),2),_=o(b),A=t(o(_),2);S(A),l(_);var y=t(_,2),M=t(o(y),2);S(M),l(y);var w=t(y,2),z=t(o(w),2);S(z),l(w);var J=t(w,2);{var G=e=>{var r=se(),U=o(r,!0);l(r),R(()=>F(U,a(i))),m(e,r)};T(J,e=>{a(i)&&e(G)})}var I=t(J,2),K=o(I);{var L=e=>{var r=re();q(),m(e,r)},N=e=>{var r=O("Connect");m(e,r)};T(K,e=>{a(p)?e(L):e(N,!1)})}l(I),l(b),l(P),l(h),R(()=>I.disabled=a(p)),E("submit",b,e=>{e.preventDefault(),B()}),$(A,()=>a(f),e=>s(f,e)),$(M,()=>a(d),e=>s(d,e)),$(z,()=>a(x),e=>s(x,e)),m(v,h),j(),W()}export{xe as component};
